# 计算机网络复习

## 概述

### Internet与internet

* 互联网重要特点：连通性与共享
* 推荐命名因特网，广泛使用互联网
* 互联网+：使得互联网有传统行业进行深度融合，创造新的发展生态
  特点：把互联网地穿心成果深度融合与经济涉水各领域之中，大大提升了实体经济地创新力和生产力
* 小写的是一个通用名词泛指由多个计算机网络互联而成的网络
  大写的时一个专用名次，指的是当前全球最大的、开放的、由众多网络相互链接而成的特定计算机网络

### ISP与IXP

isp 互联网服务提供者

ixp互联网交换点

### 标准与RFC

互联网草案 ——> 建议标准（从这开始就是RFC文档） ——> 互联网标准

![image-20211229143554347](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229143554347.png)

### 客户端通信方式

#### c/s客户-服务器

客户和服务器是进程中服务和被服务的关系，客户程序必须知道服务器程序的地址

#### p2p对等方式

双方既是客户又是服务器

### 互联网的组成（核心和边缘）

边缘部分是由连接在互联网上的主机组成、由用户直接使用，用来通信和资源共享；核心部分由大量网络和链接这些网络的苦忧其组成

路由其是实现分组交换的关键构件

路由工作流程：收到的分组放入缓存、查找转发表、在适当的端口发送

### 交换的本质、电路交换、报文交换

核心部分是很多网络和把它们互连起来的路由器组成，主机处在互联网的边缘部分。核心部分内告诉链路

主机处于边缘部分，主要就是交换信息的

#### 电路交换

电路交换：交换的意义就是转接、和民国时期的电话系统差不多，是面向连接的

分为以下三个阶段：建立连接、通信、释放连接

缺点：计算机数据具有突发性、传输时利用率较低

#### 分组交换

利用了存储转发技术，在发送端讲报文划分为较短的、固定长度的数据段，在每一个数据段的前面添加上首部就构成了分组

首部包含了地址等控制信息、独立选择传输路径

优点：

1. 高效：动态分配传输宽带
2. 灵活：给每个分组独立选择最合适的转发路由
3. 迅速：不建立连接就能发送分组
4. 可靠：保证可靠性的网络协议

缺点：

1. 排队时延
2. 首部增大了传输量

报文交换和分组交换不需要预先分配串数宽带，可以应对突发

### 计算机体系结构的层次类型和比较

#### 按照网络的作用范围

广域网

城域网

局域网

个人区域网PATH

#### 按照网络使用者

公用网

专用网

#### 按照用来把用户接入到互联网的网络

接入网AN

局域网

### 网络的性能指标

1. 速率
   数据的传送速率 也成为比特率、数据率

2. 宽带

   频带宽度、也是单位时间内网络中的某信道所能通过的“最高数据率”

3. 吞吐量

   单位时间内通过某个网络的数据量

4. 时延
   数据从一段传送到另一端所需的时间

   发送时延、传播时延、处理时延、排队时延

   发送时延是从路由器发出的时延

   而传播速率为![image-20211229163637707](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229163637707.png)

   ![image-20211229163741458](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229163741458.png)

5. 时延宽带积
   时延宽带积=传播时延*宽带

   对于发送端而言，它使用链路的最大带宽去不断地发送比特数据，那么在发送端所发送第一个比特，到得知第一个比特被接收的这段时间内，一共发送了多少个比特？

6. 往返时间RTT

   是发送到接收时所经理的时间

7. 利用率

   信道利用率与网络利用率，网络利用率时信道利用率的加权平均值

![image-20211229164445156](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229164445156.png)



### 网络协议的三要素

语法：数据与控制信息的结构或格式

语义：需要发出何种控制信息，完成何种动作以及做出何种响应

同步：时间实现顺序的详细说明

### 几种体系结构的层次类型和区别

![image-20211229164807657](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229164807657.png)

任何两个相同的层次把数据通过水平虚线直接传输给对方，就是所谓的对等层之间的通信，数据单位为PDU

### 协议和服务之间的区别

协议是水平的，控制对等实体之间通信的规则

服务是垂直的，是由下层向上层通过层间接口提供的

## 物理层

### 物理层解决什么问题

考虑如何在传输媒体上传输数据比特、尽可能屏蔽不同传输媒体、通信手段之间的差异

主要任务是确定与传输媒体的接口的一些特性

### 数据信息系统的模型

一个数据通信系统包括三大部分：原系统、传输系统、目的系统或者发送方、传输系统、目的系统

### 信号的相关概念

信道：一般用来表示向某一个方向传送信息的媒体

信号是数据的电气的或电磁的表现

模拟信号、数字信号分别表示信息的参数取值是离散和连续的

基带信号（基本频带信号）来源于信源的信号

基带调制：仅对基带信号的波形进行变换，使它能够与信道特性相适应，变换后的信号仍然是基带信号，这个过程称为编码

带通调制：使用载波进行调制，把基带信号的频率范围搬移到更高的频段，并转换为模拟信号，这样就能更好地在模拟信道中传输

带通信号:经过载波调制后的信号

### 编码方式

#### 基带调制

![image-20211229170614659](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229170614659.png)

下面两种编码的信号频率高，并且可以从讯号波形本身中提取信号时钟频率

#### 带通调制

* 二元制调制方法

调幅

调频

调相

* 正交振幅调制QAM

### 信道复用方法

#### 频分复用

#### 时分复用

* 统计时分复用 动态分配时隙

#### 波分复用

光的频分复用

#### 码分复用

## 链路层

### 三个基本问题

#### 封装成帧

在一段数据的前后分别添加首部和尾部，构成了一个帧

#### 透明传输

如果数据的某个字节的二进制代码恰好和SOH和EOT一样，数据链路层就会错误地“找到帧地边界”

解决办法是字节填充或者字符填充，在响应控制字符前面插入转义字符

#### 差错检测

循环冗余检验

### 数据链路与链路之间的区别

物理链路是一条无源的点到点的物理线路段，中间没有任何其他的交换机的交换节点

数据链路是除了物理链路外，还必须有用通信协议来控制这些数据的传输，将实现这些协议的硬件和软件加到链路上，就构成了数据链路。

### ARQ停止等待协议与连续ARQ

#### ARQ停止等待协议

* 检验收到的序号和要接受的序号是否一致，一致则丢弃
* 只有收到序号正确地ack后才会继续发送
* 连续发送相同序号地数据帧、超时重传

#### 连续ARQ

不是发一个了，是发一组

#### 滑动窗口（回退n步）

滑动窗口还有接收窗口就是发送或者检验地个数

存在一个最佳帧长

#### 由此引出了选择重传ARQ

就是缓存一下哪些前面序号不连续的，收到了再一起传上去

### 循环冗余检测CRC 和帧检验序列FCS

可靠传输：无比特传输、无差错传输

* 冗余码地计算

被除数：数据+n个0

除数：事先选定好的长度为（n+1）地除数P

将余数作为冗余码拼接在数据M后发出去

余数为零则说明 没有差错

### CSMA/CD协议

csma监听其他是否传输数据，并采取相应动作

csma载波监听多点接入cd碰撞检测

* 持续地就是一直看着你，你不传了我马上传
* 非持续就是我过段时间再来看看
* 冲突检测的就是，看别人穿就让一让



载波检测就是看看总线咋样了，碰撞检测就是勘测总线上的信号电压摆动，一旦碰撞了就停止发送

着两种协议使得平均通信量远小于最高数据率而且只能双向交替通信

#### 要点

1. 准备发送
2. 检测信道 不停检测总线忙不忙，一旦空闲96比特以上就发送帧
3. 检查碰撞 

发送成功继续准备发送

发送不成功就等待r倍512比特事件后，就返回第二步，继续检测，16次以后还传不出去就报错了

### 以太网地拓展方法

以前是用网桥，现在是交换机

交换机本质上就是一个多接口的网桥

全双工、即插即用、具有自学习功能、用户独享宽带，增加总容量、适配多种速率

### 最小帧长意义

保证碰撞信号传回来时，数据还没传完

### 交换机地工作原理与自学习

多接口的网桥，根据mac帧地目的地址对收到地帧进行转发和过滤，运行自学习算法维护交换表，后来就能快速查找交换表提高效率

### VLAN虚拟局域网

利用了以太网交换机，VLAN是由一些局域网网段构成的与物理位置无关地逻辑组，每一个VLAN帧都有一个标识符指向它所属地VLAN

### MAC地址

![image-20211229200625074](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229200625074.png)

## 网络层

### 中间设备异同

中间设备：

* 物理层中继系统：转发器
* 数据链路层中继系统：网桥或桥接器
* 网络层中继系统：路由器
* 网桥和路由器地混合物：桥路器
* 网络层以上地中继系统：网关

### 分类地IP地址

IP地址结构

![image-20211229201559803](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229201559803.png)

#### abcde类地址

![image-20211229201704652](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229201704652.png)

每八个为一组可以将二级制转化为十进制从而提高可读性![image-20211229201754939](C:\Users\A\Desktop\新建文件夹\blog\jirengu\image-20211229201754939.png)

#### ip地址与mac地址之间的交互关系

mac地址是数据链路层和物理层使用的地址

ip地址是网络层和以上各层使用的地址

### ip数据报的格式

![image-20211229202129944](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229202129944.png)

#### 片偏移的计算

偏偏一一八个字节为偏移单位 

![image-20211229202456028](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229202456028.png)

![image-20211229202504961](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229202504961.png)

#### 路由器的工作原理和转发算法



![image-20211229202741389](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229202741389.png)

直通、特定线路、一般线路、默认线路、报错

### 子网划分和超网聚合

从主机号内借用若干位作为子网号 然后进入该主机之后相应的搜索子网号，再进入主机号

超网聚合：前缀长度不超过23位的cidr地址快包含了多个C类地址，合起来就变成了超网

## 运输层

### 主要功能

位不同主机相同进程提供通信服务

### 通信与进程、端口号

再运输层使用端口号作为进程标识符来相互通信

### 累计确认

接收方一般采用累计确认的方式，支队按需到达的最后一个分组发送确认，表示到这个分组位置的所有分组都已经正确收到了

### tcp滑动窗口特点

1. 以字节为单位、
2. 根据确认号构建发送窗口、
3. 发送与接收存在缓存、
4. 缓存乱序报文，
5. 利用选择确认sack获取相应缺失报文

### 三次握手与四次挥手

#### 三次挥手

1. 客户向服务器发送请求报文，同时SYN=1 选择序号seq=x 表示传送数据时的第一个数据字节的序号是x
2. 服务器收到请求报文后，统一发回确认，SYN=1 ACK=1 确认号ack=x+1 自己选择的序号seq=y
3. 客户再给服务器给出确认 ACK=1 ack=y+1，双方各通知上层连接建立

#### 四次挥手

客户先发出链接释放报文段，再停止发送数据，主动关闭链接

1. 客户 FIN=1 seq=u 等待服务器确认
2. 服务器回应，确认号ack=u+1 seq =v
   客户到服务器就关闭了，服务器传数据客户还是能传到
3. 如果没有数据传了就通知放手吧

FIN=1 seq =w ACK =1 ack =u+1

4. 等2MSL，回应 ACK=1 seq =u+1 ack = w+1

### tcp主要字段作用

#### 源端口和目的端口

#### 序号

#### 确认号

期望收到对方的下一个报文段的数据的第一个字节的序号

#### 数据偏移

起始位置距离开头有多远

#### 保留

该没用过呢

#### 中间一堆

* URG 等于1时表示万分紧急，快传
* ACK 等于1时确认号才好使
* PSH 等于1 尽快交付应用程序，别等缓存满了
* SYN 等于1 这是一个连接请求 连接接受报文
* FIN 释放连接报文

#### 窗口

设置发送窗口的依据 单位为字节

#### 检验和

占两个字节，包括首部和数据两部分，计算时要在前面加12字节伪首部

#### 紧急指针

16位，紧急数据共有多少个字节

#### 选项

长度可变 最大报文段长度MSS 缓存能接受的最大长度时这个长度  注意时数据字段的最大长度

#### 填充字段

 整个首部时4字节的整数倍

### UDP TCP 区别和各自优缺点

#### 区别

1. 是否是基于链接
2. 是否具有可靠性
3. 是否由拥塞控制、UDP具有较好实时性
4. 首部大小
5. 运行速度，tcp必须建立链接
6. 面向报文还是面向字节

#### 优缺点

UDP

* 快、没有拥塞控制
* 不稳定 不可靠

TCP

* 可靠稳定
* 满，占用资源多等

## 应用层

### 常见协议及其运输层依赖

DNS域名系统 tcp udp

文件传送协议 tcp

远程终端协议 tcp

万维网 tcp

电子邮件tcp

动态主机配置协议UDP

简单网络管理协议UDP

应用进程跨越网络的通信 tcp

p2p通信

### http原理

![image-20211229211732176](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20211229211732176.png)

