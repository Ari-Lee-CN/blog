# Event Loop

- **Event Loop**
  JS到底是怎么运行的呢？

![img](https://pic2.zhimg.com/80/v2-9d9fb2de4d3e7648809ba14c293b6675_720w.jpg)



> JS引擎常驻于内存中，等待宿主将JS代码或函数传递给它。
> 也就是等待宿主环境分配宏观任务，反复等待 - 执行即为事件循环。

Event Loop中，每一次循环称为tick，每一次tick的任务如下：

1. 执行栈选择最先进入队列的宏任务（一般都是script），执行其同步代码直至结束；
2. 检查是否存在微任务，有则会执行至微任务队列为空；
3. 如果宿主为浏览器，可能会渲染页面；
4. 开始下一轮tick，执行宏任务中的异步代码（setTimeout等回调）。